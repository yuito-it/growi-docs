(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{570:function(t,a,s){"use strict";s.r(a);var e=s(48),r=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"開発環境の構築"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#開発環境の構築","aria-hidden":"true"}},[t._v("#")]),t._v(" 開発環境の構築")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[s("strong",[t._v("このページは GROWI v5.x 以下のバージョン向けに書かれています。")]),s("br"),t._v("\nGROWI v6.x 以上を開発する場合は、最新の開発スタートアップを確認してください。")])]),t._v(" "),s("h2",{attrs:{id:"各種ツールの準備"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#各種ツールの準備","aria-hidden":"true"}},[t._v("#")]),t._v(" 各種ツールの準備")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("以下は GROWI, Inc. で統一している開発環境の紹介です。\nそのため、開発にあたって必須ではない設定やツールの指定が含まれています。")])]),t._v(" "),s("h3",{attrs:{id:"docker-docker-compose-実行環境のインストール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-docker-compose-実行環境のインストール","aria-hidden":"true"}},[t._v("#")]),t._v(" docker, docker-compose 実行環境のインストール")]),t._v(" "),s("p",[t._v("ホストPCで作業します。")]),t._v(" "),s("tabs",[s("tab",{attrs:{name:"Windows",id:"tab-docker-win"}},[s("ol",[s("li",[s("p",[t._v("Ubuntu on WSL2 のインストール")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" wsl --install\n")])])]),s("ul",[s("li",[s("p",[t._v("確認")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" wsl -l -v\nNAME      STATE           VERSION\n* Ubuntu    Stopped         2\n")])])])])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("ホストのメモリを消費しすぎてしまう問題("),s("a",{attrs:{href:"https://github.com/microsoft/WSL/issues/4166",target:"_blank",rel:"noopener noreferrer"}},[t._v("microsoft/WSL#4166"),s("OutboundLink")],1),t._v(")への対処として、メモリサイズを制限する")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("C:\\Users\\YourAccount\\.wslconfig")]),t._v(" を編集(ファイルが存在しない場合は作成)")])]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[t._v("[wsl2]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("memory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("6GB")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("0")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.docker.com/products/docker-desktop",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Desktop"),s("OutboundLink")],1),t._v(" をインストール")])])])]),t._v(" "),s("tab",{attrs:{name:"Old Windows 10",id:"tab-docker-win10"}},[s("ol",[s("li",[s("p",[t._v("WSL2 を利用できる状態にする")]),t._v(" "),s("ol",[s("li",[s("p",[s("a",{attrs:{href:"https://docs.microsoft.com/ja-jp/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package",target:"_blank",rel:"noopener noreferrer"}},[t._v("WSL2 Linux カーネル更新プログラム パッケージ"),s("OutboundLink")],1),t._v(" をインストール")])]),t._v(" "),s("li",[s("p",[t._v("管理者権限で起動した PowerShell で以下を実行")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Hyper-V の無効化")]),t._v("\nDisable-WindowsOptionalFeature -Online -FeatureName "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft-Hyper-V"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WSL の有効化")]),t._v("\nEnable-WindowsOptionalFeature -Online -FeatureName "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VirtualMachinePlatform"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft-Windows-Subsystem-Linux"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Microsoft Store で Ubuntu をインストール")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("アプリ名にバージョンが入っていない「Ubuntu」アプリを推奨")]),t._v(" "),s("ul",[s("li",[t._v("その時点の最新版(Ubuntu 20.04 LTS 等)へのエイリアスになっている")])])]),t._v(" "),s("li",[s("p",[t._v("単体で起動してユーザー作成、ログインまで済ませる")])]),t._v(" "),s("li",[s("p",[t._v("確認")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" wsl -l -v\nNAME      STATE           VERSION\n* Ubuntu    Stopped         2\n")])])])]),t._v(" "),s("li",[s("p",[t._v("VERSION 1 で動いている場合は、更に "),s("code",[t._v("wsl --set-version Ubuntu 2")]),t._v(" を打ち込んでディストリビューションを更新する")])])])]),t._v(" "),s("li",[s("p",[t._v("ホストのメモリを消費しすぎてしまう問題("),s("a",{attrs:{href:"https://github.com/microsoft/WSL/issues/4166",target:"_blank",rel:"noopener noreferrer"}},[t._v("microsoft/WSL#4166"),s("OutboundLink")],1),t._v(")への対処として、メモリサイズを制限する")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("C:\\Users\\YourAccount\\.wslconfig")]),t._v(" を編集(ファイルが存在しない場合は作成)")])]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[t._v("[wsl2]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("memory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("6GB")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("0")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.docker.com/products/docker-desktop",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Desktop"),s("OutboundLink")],1),t._v(" をインストール")])])])]),t._v(" "),s("tab",{attrs:{name:"Mac (Intel)",id:"tab-docker-mac"}},[s("ol",[s("li",[s("a",{attrs:{href:"https://www.docker.com/products/docker-desktop",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Desktop"),s("OutboundLink")],1),t._v(" をインストール\n"),s("ol",[s("li",[t._v("メモリ利用量上限がデフォルトでは 2GB に設定されているので変更する\n"),s("ul",[s("li",[t._v("参考: "),s("a",{attrs:{href:"https://docs.docker.com/docker-for-mac/#resources",target:"_blank",rel:"noopener noreferrer"}},[t._v("Get started with Docker Desktop for Mac | Resources"),s("OutboundLink")],1)])])])])])])])],1),t._v(" "),s("h3",{attrs:{id:"git-のインストール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-のインストール","aria-hidden":"true"}},[t._v("#")]),t._v(" Git のインストール")]),t._v(" "),s("p",[t._v("ホストPCで作業します。")]),t._v(" "),s("tabs",[s("tab",{attrs:{name:"Windows",id:"tab-git-win"}},[s("ol",[s("li",[s("a",{attrs:{href:"https://gitforwindows.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git for Windows"),s("OutboundLink")],1),t._v(" のインストール\n"),s("ul",[s("li",[t._v("基本的に初期設定でよいが、Vim を触ったことがない人、あるいは慣れていない人は以下のオプションを変更する\n"),s("ol",[s("li",[t._v("Chooseing the default editor used by Git\n"),s("ul",[s("li",[t._v("他のエディタに変更する")])])])])])])])])]),t._v(" "),s("tab",{attrs:{name:"Mac",id:"tab-git-mac"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("brew "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\nbrew "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" git-lfs\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" lfs "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])])])],1),t._v(" "),s("h4",{attrs:{id:"設定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#設定","aria-hidden":"true"}},[t._v("#")]),t._v(" 設定")]),t._v(" "),s("p",[t._v("devcontainer は 自動的に docker ホストの設定を参照します。")]),t._v(" "),s("p",[t._v("ここではコンテナ内部から参照するためのホスト側の設定を行います。\n")]),t._v(" "),s("tabs",[s("tab",{attrs:{name:"Windows",id:"tab-git-configuration-win"}},[s("ol",[s("li",[s("p",[t._v("docker ホストとなる WSL2 のターミナルで以下を実行する")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name, email の設定")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Your Name"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.email "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yourname@example.com"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# autocrlf 無効化")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global core.autocrlf "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Windows の場合は、WSL 内から更にホストPCの credential helper を参照する設定を行う")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global credential.helper "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/mnt/c/Program\\ Files/Git/mingw64/libexec/git-core/git-credential-manager-core.exe"')]),t._v("\n")])])])])])]),t._v(" "),s("tab",{attrs:{name:"Mac",id:"tab-git-configuration-mac"}},[s("ol",[s("li",[s("p",[t._v("ホストPCのターミナルで以下を実行")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name, email の設定")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Your Name"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.email "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yourname@example.com"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# autocrlf 無効化")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global core.autocrlf "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Git Credential Helper (GCM) を設定する"),s("br"),t._v(" "),s("a",{attrs:{href:"https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git"),s("OutboundLink")],1)])])])])],1),t._v(" "),s("h3",{attrs:{id:"visual-studio-code-のセットアップ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#visual-studio-code-のセットアップ","aria-hidden":"true"}},[t._v("#")]),t._v(" Visual Studio Code のセットアップ")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://code.visualstudio.com/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Visual Studio Code"),s("OutboundLink")],1),t._v(" をインストール")]),t._v(" "),s("li",[t._v("拡張機能をインストール\n"),s("ul",[s("li",[t._v("「Remote - Development」extension のインストール")])])])]),t._v(" "),s("h3",{attrs:{id:"mongodb-のための-gui-クライアント"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-のための-gui-クライアント","aria-hidden":"true"}},[t._v("#")]),t._v(" MongoDB のための GUI クライアント")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://robomongo.org/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Robo 3T"),s("OutboundLink")],1),t._v(" をインストール")])]),t._v(" "),s("h2",{attrs:{id:"ワークスペース準備"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ワークスペース準備","aria-hidden":"true"}},[t._v("#")]),t._v(" ワークスペース準備")]),t._v(" "),s("p",[t._v("devcontainer で開発するには、以下のような構造のディレクトリツリーが必要です。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("- GROWI\n    - growi                   <-- weseek/growi repository\n    - growi-docker-compose    <-- weseek/growi-docker-compose repository\n")])])]),s("ul",[s("li",[t._v("以下の手順を、Windows の場合は WSL 内、Mac の場合はホストPCで作業します")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[s("strong",[t._v("事前チェック")]),t._v(" "),s("code",[t._v("git config -l --global")]),t._v(" で、autoCRLF が false になっていることを確認しましょう")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p ~/Projects/GROWI\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" ~/Projects/GROWI\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/weseek/growi.git\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/weseek/growi-docker-compose.git\n")])])])],1)},[],!1,null,null,null);a.default=r.exports}}]);