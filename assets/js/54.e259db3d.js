(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{418:function(s,e,t){"use strict";t.r(e);var a=t(48),n=Object(a.a)({},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"migrate-from-crowi-plus-docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#migrate-from-crowi-plus-docker-compose","aria-hidden":"true"}},[s._v("#")]),s._v(" Migrate from crowi-plus-docker-compose")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("DO NOT EDIT "),t("code",[s._v("docker-compose.yml")]),s._v(". Only edit "),t("code",[s._v("Dockerfile")]),s._v(".")])]),s._v(" "),t("h2",{attrs:{id:"dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile","aria-hidden":"true"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),t("ol",[t("li",[s._v("Edit the line of "),t("code",[s._v("FROM")]),s._v(" and "),t("code",[s._v("ENV APP_DIR")]),s._v(".\n"),t("ul",[t("li",[t("p",[t("strong",[s._v("Before")])]),s._v(" "),t("div",{staticClass:"language-docker extra-class"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" weseek/crowi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("2\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" APP_DIR /opt/crowi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plus\n")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("After")])]),s._v(" "),t("div",{staticClass:"language-docker extra-class"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" weseek/growi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("3\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" APP_DIR /opt/growi\n")])])])])])]),s._v(" "),t("li",[s._v("Because GROWI includes lsx plugin and pukiwiki-like-linker plugin in GROWI official image by default, comment out or delete the lines below.\n"),t("ul",[t("li",[t("p",[t("strong",[s._v("Before")])]),s._v(" "),t("div",{staticClass:"language-docker extra-class"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install plugins if necessary")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"install plugins"')]),s._v(" \\\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  && npm install --save \\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      crowi-plugin-lsx \\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      crowi-plugin-pukiwiki-like-linker \\")]),s._v("\n    && echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"done."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you must rebuild if install plugin at least one")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RUN npm run build:prod")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("After")])]),s._v(" "),t("div",{staticClass:"language-docker extra-class"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install plugins if necessary")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;; NOTE: In GROWI v3 and later,")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;       2 of official plugins (growi-plugin-lsx and growi-plugin-pukiwiki-like-linker)")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;       are now included in the ")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'weseek/growi'")]),s._v(" image.\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;       Therefore you will not need following lines except when you install third-party plugins.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#RUN echo ")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"install plugins"')]),s._v(" \\\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  && yarn add \\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      growi-plugin-XXX \\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      growi-plugin-YYY \\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  && echo ")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"done."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you must rebuild if install plugin at least one")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#RUN npm run build:prod")]),s._v("\n")])])])])])])]),s._v(" "),t("h2",{attrs:{id:"start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start","aria-hidden":"true"}},[s._v("#")]),s._v(" Start")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("docker-compose up")])])])])},[],!1,null,null,null);e.default=n.exports}}]);